version: "3.8"

services:
  grobid:
    image: lfoppiano/grobid:latest
    container_name: grobid
    #ports:
    #  - "8070:8070"   # REST API
    #  - "8071:8071"   # Admin API (optional)
    environment:
      - GROBID_HOME=/opt/grobid
    restart: unless-stopped

  i-librarian:
    image: cgrima/i-librarian:latest
    container_name: i-librarian
    ports:
      - "38474:80"     # Web UI â†’ http://localhost:8474
    volumes:
      - ./i-librarian-data:/app/data
    restart: unless-stopped

  importer:
    build: .
    container_name: autoimporter
    depends_on:
      - grobid
      - ilibrarian
    env_file:
      - .env
    volumes:
      - ./new_papers:/app/new_papers
      - ./processed:/app/processed
    restart: unless-stopped